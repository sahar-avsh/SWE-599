<div>
    {% if filter_flag %}
        <div class="applied-filters">
            <h5 class="applied-filters-header"> <u> Applied filters </u> </h5>
            {% if keyword_query %}
                <b> Keyword: </b> <span id="id-keyword-query">{{keyword_query}}</span> <span> <svg id="id-remove-filter-keyword" class="remove-filter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z"/></svg><br></span>
            {% endif %}

            {% if owner_query %}
                <b> Owner: </b> <span id="id-owner-query">{{owner_query}}</span> <span> <svg id="id-remove-filter-owner" class="remove-filter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z"/></svg><br></span>
            {% endif %}
        </div>
    {% endif %}
</div>

<div id="id_results" class="results">
    <h2>Found Mindspaces</h2>
    <p> {{page_obj.paginator.count}} result(s) found </p>
    {% for result in page_obj.object_list %}
        <div id="id-search-{{result.id}}">
            <h2 class="mindspace-title" id="id-mindspace-search-title-{{result.id}}"> <a style="text-decoration: none; color: black;" href="{{result.get_absolute_url}}"> {{ result.title }} </a> </h2>
        </div>
    {% empty %}
    {% endfor %}
</div>

{% if is_paginated %}
    <div class="pagination" style="margin-top: 20px; margin-left: 10%; margin-right: 10px;">
        <span class="page-links">
            {% if page_obj.has_previous %}
                <a class="btn btn-outline-primary" id="id-search-mindspace-page-previous" page-num={{page_obj.previous_page_number}} href="{% url 'mindspace:ajax_load_search_results' %}">Previous</a>
            {% endif %}

            <span class="page-current btn btn-outline-primary" style="cursor: default;">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
                <a class="btn btn-outline-primary" id="id-search-mindspace-page-next" page-num={{page_obj.next_page_number}} href="{% url 'mindspace:ajax_load_search_results' %}">Next</a>
            {% endif %}
        </span>
    </div>
{% endif %}

<script>
    $(document).ready(function() {
        $("#id-remove-filter-keyword").click(function(e) {
            $(".spinner-border").show();
            $("#id-search-keyword").val("");
            $.ajax({
                url: '{% url 'mindspace:ajax_load_search_results' %}',
                type: 'GET',
                data: {
                    keyword_query: $("#id-search-keyword").val(),
                    owner_query: $("#id-search-owner").val(),
                },
                success: function(response) {
                    $(".spinner-border").hide();
                    $(".mindspace-search-results").html(response);
                }
            });
        });

        $("#id-remove-filter-owner").click(function(e) {
            $(".spinner-border").show();
            $("#id-search-owner").val("");
            $.ajax({
                url: '{% url 'mindspace:ajax_load_search_results' %}',
                type: 'GET',
                data: {
                    keyword_query: $("#id-search-keyword").val(),
                    owner_query: $("#id-search-owner").val(),
                },
                success: function(response) {
                    $(".spinner-border").hide();
                    $(".mindspace-search-results").html(response);
                }
            });
        });
    });
</script>

<style>
    .remove-filter {
        width: 15px;
        height: 15px;
        margin-bottom: 1px;
    }

    .remove-filter:hover {
        width: 17px;
        height: 17px;
    }

    .results {
        width: 80%;
        margin-top: 2%;
        margin-left: 5%;
        margin-right: 10px;
        display: inline-block;
    }

    .applied-filters {
        width: 90%;
        margin-top: 2%;
        margin-left: 5%;
        margin-right: 10px;
        display: inline-block;
        padding: 10px;
        border: 3px grey solid;
    }
</style>